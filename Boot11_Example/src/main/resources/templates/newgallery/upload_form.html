<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>/newgallery/upload_form.html</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<style>
	.drop-zone{
		height: 100px;
		width: 200px;
		border: 3px solid #cecece;
		border-radius: 10px;
		display: flex;
		justify-content: center; /* 좌우로 가운데 정렬 */
		align-items: center; /* 위아래로 가운데 정렬 */
		cursor:pointer;
	}
</style>
</head>
<body>
	<div class="container">
		<h1>이미지 업로드 폼</h1>
		<form th:action="@{/newgallery/upload}" method="post" enctype="multipart/form-data">
			<div>
				<label for="caption">설명</label>
				<input type="text" name="caption" id="caption" />
			</div>
			<div>
				<label for="image">이미지</label>
				<input type="file" name="image" id="image"/>
			</div>
			<div class="drop-zone mb-2">
			Drag, Drop! or Click!
			<img src="" id="dropImage"/>
			</div>
			<button type="submit">업로드</button>
		</form>
	</div>
	<script>
		const dropZone = document.querySelector(".drop-zone")
		//dropzone 이미지 드랍
		dropZone.addEventListener("dragover", (e)=>{
			e.preventDefault();
		});
		dropZone.addEventListener("drop", (e)=>{
			e.preventDefault();
			
			const files = e.dataTransfer.files;
						
			if(files.length > 1){
				alert("이미지 파일 하나만 유효")
				return;
			}
			const file = files[0];
			document.querySelector("#image").files = files;
			dropZone.innerText = file.name;
		});
			
		//dropzone 클릭
		dropZone.addEventListener("click", (e)=>{
			document.querySelector("#image").click();
		});
		//dropzone 이름 변경
		document.querySelector("#image").addEventListener("change", ()=>{
			const files = e.target.files;
			const file = files[0];
			dropZone.innerText=file.name;
			
			if(files.length > 0){
				
			}
		})
	</script>
</body>
</html>